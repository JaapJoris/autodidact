{% extends 'base.html' %}
{% load markdown_tag %}

{% block navigation %}
<li class="visitedPage"><a href="{% url 'homepage' %}">Home</a></li>
<li class="visitedPage"><a href="{% url 'course' course.slug %}">{{course.name}}<br>(<code>{{course.colloquial_name}}</code>)</a></li>
<li class="currentPage"><a href="{% url 'session' course.slug session_nr %}">Session {{session_nr}}</a></li>
{% for assignment in session.assignments.all %}
<li class="futurePage"><a href="{% url 'assignment' course.slug session_nr forloop.counter %}">Assignment {{forloop.counter}}: {{assignment.name}}</a></li>
{% empty %}
<li class="empty">No assignments available</li>
{% endfor %}
{% endblock %}

{% block editor %}
{% if request.user.is_staff %}
<a class="editlink" href="{% url 'admin:autodidact_session_change' session.pk %}">Edit this session</a>
{% endif %}
{% endblock %}

{% block content %}

<section class="session description">
  <h1>Session {{session_nr}}: {{session.name}}</h1>
  {{session.description|markdown}}
</section>

<section class="session progress">
  <h1>Your progress in session {{session_nr}}:</h1>
  <table>
	{% for percentage in percentages %}
	<tr>
      <td class="y-axis">
		<a href="{% url 'assignment' course.slug session_nr forloop.counter %}">Assignment {{forloop.counter}}:</a>
      </td>
      <td>
		<div class="bar" style="width: {{percentage}}%">{{percentage}}%</div>
      </td>
	</tr>
	{% endfor %}
	<tr>
	  <td class="origin">
	  </td>
	  <td class="x-axis">
	  </td>
	</tr>
  </table>
</section>

<section class="session answers">
  <h1>Your answers:</h1>
  <table>
	{% for answers_per_assignment in answers %}
	<tr>
	  <td colspan="2">
		<h2>Assignment {{forloop.counter}}</h2>
	  </td>
	</tr>
	{% for answer in answers_per_assignment %}
	{% if answer %}
	<tr>
	  <td class="step">
		<a href="{% url 'assignment' course.slug session_nr forloop.parentloop.counter %}?step={{forloop.counter}}&save_only=true">Step {{forloop.counter}}</a>)
	  </td>
	  <td>
		{% if answer == "mispoes" %}
		<pre class="missing">Required answer is missing</pre>
		{% else %}
		<pre>{{answer}}</pre>
		{% endif %}
	  </td>
	</tr>
	{% endif %}
	{% endfor %}
	{% endfor %}
  </table>
</section>


{% endblock %}
